08 PAM Pràctica: pam_mount.so

Pràctica del mòdul pam_mount.so
● Consulta el HowTo-PAM l’apartat “7 Exemples PAM: usant el servei session”
● Consulta el man de pam_mkhomedir.so
● Consulta el man de pam_mount.so
● Consulta el man de /etc/security/pam_mount.conf.xml

Configura el container PAM (--privileged) per provar cada un dels casos següents:

	docker run --rm --name pam.edt.org --privileged --network 2hisix -it balenabalena/pam21:base 

Necessitem instal·lar els paquets:

	libpam-pwquality
	libpam-mount

● A tots els usuaris es munta dins el seu home un recurs anomenat tmp de 100M
corresponent a un ramdisk tmpfs.


	vim /etc/security/pam_mount.conf.xml

#tmpfs:
<volume user="test" fstype="tmpfs" mountpoint="/home/test"
options="size=100M,uid=%(USER),mode=0700" />




	vim /etc/pam.d/common-session
	
	session	[default=1]	pam_permit.so
	session	requisite	pam_deny.so
	session	required	pam_permit.so
	session	required	pam_unix.so 
	session	optional	pam_mount.so 



● Només a l’usuari unix01 es munta dins el seu home un recurs anomenat tmp de
200M corresponent a un ramdisk tmpfs.

● A l’usuari unix02 se li munta dins el home un recurs NFS de xarxa.
*Nota* Creeu un recurs de xarxa NFS per exemple /usr/share/docs exportat per
NFS.



---------------------------------------------------------------------------------------

# UTILITZAR pam_mount

/etc/security/pam_mount.conf.xml

tmpfs:
<volume user="test" fstype="tmpfs" mountpoint="/home/test"
options="size=10M,uid=%(USER),mode=0700" />

# Montam un volum de 10 MB, propietat del usuari (mode)


